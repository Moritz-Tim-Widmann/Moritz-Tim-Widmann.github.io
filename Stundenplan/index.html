<!DOCTYPE html>
<html lang="en">
<head>
    <link href="../css/index.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stundenplan</title>
</head>
<body>
    <h1>Stundenplan</h1>
    <h2>Die website ist noch in arbeit. Bitte Probleme/Vorschl√§ge auf <a href="https://github.com/Moritz-Tim-Widmann/infms.me/issues/new">GitHub</h2>
    <form action="index.php" method="get">
        <input list="classes">Klasse</label>
            <datalist id="classes">
                <script type="text/javascript">
                    let options = []
                    
                    /** returns an array of option objects */
                    function getOptions(relativePrefix, absolutePrefix) {
                        const CLASSES_PER_YEAR = 2
                        const CLASSES = "abcdefghijklmnopqrstuvwxyz".substr(0,CLASSES_PER_YEAR).split("")
                        let options = []
                        

                        CLASSES.forEach(suffix => {
                            options.push({
                                relative : relativePrefix + suffix,
                                absolute : absolutePrefix + suffix
                            })
                        })
                        return options
                    }

                    for (let j = 1; j <= 3; j++) {
                        
                        /** the year we are in now */
                        let thisYear = new Date().getFullYear()
                        /** the last 2 digits of the year we are in now */
                        let thisYearShort = parseInt(thisYear.toString().substr(-2))
                        /** thhe last 2 digits of the year I_a got into the ims*/
                        let absoluteYear = thisYearShort - j + 1

                        /** the first two letters for the relative class name */
                        let relativePrefix = "I"+j
                        /** the last three letters for the absolute class name */
                        let absolutePrefix = "I"+absoluteYear
                        
                        getOptions(relativePrefix, absolutePrefix).forEach(option => { //for each class of that year
                            options.push(option)
                        })
                    }
                    options.forEach(option =>{
                        let classes= document.getElementById("classes")
                        classes.appendChild(
                            new Option(option.relative, option.absolute)
                        )
                        classes.appendChild(
                            new Option(option.absolute, option.absolute)
                        )
                    })
                </script>
            </datalist>
    </form>
</body>
</html>